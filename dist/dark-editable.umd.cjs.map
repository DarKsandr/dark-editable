{"version":3,"file":"dark-editable.umd.cjs","sources":["../src/Modes/BaseMode.ts","../src/Modes/PopupMode.ts","../src/Modes/InlineMode.ts","../src/Types/BaseType.ts","../src/Types/InputType.ts","../src/Types/TextAreaType.ts","../src/Types/SelectType.ts","../src/Types/DateType.ts","../src/Types/DateTimeType.ts","../src/dark-editable.ts"],"sourcesContent":["import DarkEditable from \"../dark-editable.ts\";\r\n\r\nexport default class BaseMode{\r\n    context: DarkEditable;\r\n\r\n    constructor(context: DarkEditable) {\r\n        if(this.constructor === BaseMode){\r\n            throw new Error(`It's abstract class`);\r\n        }\r\n        this.context = context;\r\n    }\r\n    event_show(){\r\n        this.context.typeElement.hideError();\r\n        if(!this.context.typeElement.element){\r\n            throw new Error(\"Element is missing!\");\r\n        }\r\n        this.context.typeElement.element.value = this.context.value;\r\n        this.context.element.dispatchEvent(new CustomEvent(\"show\"));\r\n    }\r\n    event_shown(){\r\n        this.context.element.dispatchEvent(new CustomEvent(\"shown\"));\r\n    }\r\n    event_hide(){\r\n        this.context.element.dispatchEvent(new CustomEvent(\"hide\"));\r\n    }\r\n    event_hidden(){\r\n        this.context.element.dispatchEvent(new CustomEvent(\"hidden\"));\r\n    }\r\n    init(){\r\n        throw new Error('Method `init` not define!');\r\n    }\r\n    enable(){\r\n        throw new Error('Method `enable` not define!');\r\n    }\r\n    disable(){\r\n        throw new Error('Method `disable` not define!');\r\n    }\r\n    hide(){\r\n        throw new Error('Method `hide` not define!');\r\n    }\r\n}","import { Popover } from \"bootstrap\";\r\nimport BaseMode from \"./BaseMode.js\";\r\n\r\nexport default class PopupMode extends BaseMode{\r\n\r\n    popover: Popover|null = null;\r\n\r\n    init(){\r\n        this.popover = new Popover(this.context.element, {\r\n            container: \"body\",\r\n            content: this.context.typeElement.create(),\r\n            html: true,\r\n            customClass: \"dark-editable\",\r\n            title: this.context.options.title,\r\n        });\r\n        this.context.element.addEventListener('show.bs.popover', () => {\r\n            this.event_show();\r\n        });\r\n        this.context.element.addEventListener('shown.bs.popover', () => {\r\n            this.event_shown();\r\n        });\r\n        this.context.element.addEventListener('hide.bs.popover', () => {\r\n            this.event_hide();\r\n        });\r\n        this.context.element.addEventListener('hidden.bs.popover', () => {\r\n            this.event_hidden();\r\n        });\r\n\r\n        document.addEventListener('click', (e) => {\r\n            const target = <HTMLElement>e.target;\r\n            // @ts-ignore\r\n            if(this.popover && target === this.popover.tip || target === this.context.element) return;\r\n            let current = target.parentNode;\r\n            while(current){\r\n                // @ts-ignore\r\n                if(current === this.popover.tip) return;\r\n                current = current.parentNode;\r\n            }\r\n            this.hide();\r\n        })\r\n    }\r\n    enable(): void\r\n    {\r\n        if(this.popover){\r\n            this.popover.enable();\r\n        }\r\n    }\r\n    disable(): void\r\n    {\r\n        if(this.popover){\r\n            this.popover.disable();\r\n        }\r\n    }\r\n    hide(): void\r\n    {\r\n        if(this.popover){\r\n            this.popover.hide();\r\n        }\r\n    }\r\n}","import BaseMode from \"./BaseMode.js\";\r\n\r\nexport default class InlineMode extends BaseMode{\r\n    init(){\r\n        const open = () => {\r\n            if(!this.context.options.disabled){\r\n                const item = this.context.typeElement.create();\r\n                this.event_show();\r\n                this.context.element.removeEventListener('click', open);\r\n                this.context.element.innerHTML = '';\r\n                this.context.element.append(item);\r\n                this.event_shown();\r\n            }\r\n        }\r\n        this.context.element.addEventListener('click', open);\r\n    }\r\n    enable(){\r\n\r\n    }\r\n    disable(){\r\n\r\n    }\r\n    hide(){\r\n        this.event_hide();\r\n        this.context.element.innerHTML = this.context.value;\r\n        setTimeout(() => {\r\n            this.init();\r\n            this.event_hidden();\r\n        }, 100);\r\n    }\r\n}","import DarkEditable from \"../dark-editable.ts\";\r\nimport BaseTypeButtons from \"../Interfaces/BaseTypeButtons.ts\";\r\n\r\nexport default class BaseType{\r\n    context: DarkEditable;\r\n    element: HTMLInputElement|null = null;\r\n    error: HTMLElement|null = null;\r\n    form: HTMLElement|null = null;\r\n    load: HTMLElement|null  = null;\r\n    buttons: BaseTypeButtons = {success: null, cancel: null};\r\n\r\n    constructor(context: DarkEditable) {\r\n        if(this.constructor === BaseType){\r\n            throw new Error(`It's abstract class`);\r\n        }\r\n        this.context = context;\r\n    }\r\n\r\n    create(): HTMLElement\r\n    {\r\n        throw new Error('Method `create` not define!');\r\n    }\r\n\r\n    createContainer(element: HTMLInputElement): HTMLDivElement\r\n    {\r\n        const div = document.createElement(`div`);\r\n        this.element = element;\r\n        this.error = this.createContainerError();\r\n        this.form = this.createContainerForm();\r\n        this.load = this.createContainerLoad();\r\n        this.form.append(element, this.load);\r\n        this.buttons.success = null;\r\n        this.buttons.cancel = null;\r\n        if(this.context.options.showbuttons){\r\n            this.buttons.success = this.createButtonSuccess();\r\n            this.buttons.cancel = this.createButtonCancel();\r\n            this.form.append(this.buttons.success, this.buttons.cancel);\r\n        }\r\n\r\n        div.append(this.error, this.form);\r\n        return div;\r\n    }\r\n\r\n    createContainerError(): HTMLDivElement\r\n    {\r\n        const div = document.createElement(`div`);\r\n        div.classList.add(\"text-danger\", \"fst-italic\", \"mb-2\", \"fw-bold\");\r\n        div.style.display = \"none\";\r\n        return div;\r\n    }\r\n\r\n    createContainerForm(): HTMLFormElement\r\n    {\r\n        const form = document.createElement(`form`);\r\n        form.classList.add(\"d-flex\", \"align-items-start\");\r\n        form.style.gap = \"20px\";\r\n        form.addEventListener('submit', async e => {\r\n            e.preventDefault();\r\n            const newValue = this.getValue();\r\n            if(this.context.options.send && this.context.options.pk && this.context.options.url && (this.context.value !== newValue)){\r\n                this.showLoad();\r\n                let msg;\r\n                try {\r\n                    const response = await this.ajax(newValue);\r\n                    if(response.ok){\r\n                        msg = await this.context.success(response, newValue);\r\n                    } else {\r\n                        msg = await this.context.error(response, newValue) || `${response.status} ${response.statusText}`;\r\n                    }\r\n                } catch (error) {\r\n                    console.error(error);\r\n                    msg = error;\r\n                }\r\n\r\n                if(msg){\r\n                    this.setError(msg);\r\n                    this.showError();\r\n                } else {\r\n                    this.setError('');\r\n                    this.hideError();\r\n                    this.context.value = this.getValue();\r\n                    this.context.modeElement.hide();\r\n                    this.initText();\r\n                }\r\n                this.hideLoad();\r\n            } else {\r\n                this.context.value = this.getValue();\r\n                this.context.modeElement.hide();\r\n                this.initText();\r\n            }\r\n            this.context.element.dispatchEvent(new CustomEvent(\"save\"));\r\n        })\r\n        return form;\r\n    }\r\n\r\n    createContainerLoad(): HTMLDivElement\r\n    {\r\n        const div = document.createElement(`div`);\r\n        div.style.display = \"none\";\r\n        div.style.position = \"absolute\";\r\n        div.style.background = \"white\";\r\n        div.style.width = \"100%\";\r\n        div.style.height = \"100%\";\r\n        div.style.top = '0';\r\n        div.style.left = '0';\r\n        const loader = document.createElement(`div`);\r\n        loader.classList.add(\"dark-editable-loader\");\r\n        div.append(loader);\r\n        return div;\r\n    }\r\n\r\n    createButton(): HTMLButtonElement\r\n    {\r\n        const button = document.createElement(\"button\");\r\n        button.type = \"button\";\r\n        button.classList.add(\"btn\", \"btn-sm\");\r\n        button.style.color = \"transparent\";\r\n        button.style.textShadow = \"0 0 0 white\";\r\n        return button;\r\n    }\r\n\r\n    createButtonSuccess(): HTMLButtonElement\r\n    {\r\n        const btn_success = this.createButton();\r\n        btn_success.type = \"submit\";\r\n        btn_success.classList.add(\"btn-success\");\r\n        btn_success.innerHTML = \"✔\";\r\n        return btn_success;\r\n    }\r\n\r\n    createButtonCancel(): HTMLButtonElement\r\n    {\r\n        const btn_cancel = this.createButton();\r\n        btn_cancel.classList.add(\"btn-danger\");\r\n        const div = document.createElement(\"div\");\r\n        div.innerHTML = \"✖\";\r\n        btn_cancel.append(div);\r\n        btn_cancel.addEventListener(\"click\", () => {\r\n            this.context.modeElement.hide();\r\n        });\r\n        return btn_cancel;\r\n    }\r\n\r\n    hideLoad(): void\r\n    {\r\n        if(this.load){\r\n            this.load.style.display = \"none\";\r\n        }\r\n    }\r\n\r\n    showLoad(): void\r\n    {\r\n        if(this.load){\r\n            this.load.style.display = \"block\";\r\n        }\r\n    }\r\n\r\n    ajax(new_value: string): Promise<Response>\r\n    {\r\n        let url = this.context.options.url;\r\n        if(!url){\r\n            throw new Error(\"URL is required!\");\r\n        }\r\n        if(!this.context.options.pk){\r\n            throw new Error(\"pk is required!\");\r\n        }\r\n        if(!this.context.options.name){\r\n            throw new Error(\"Name is required!\");\r\n        }\r\n        const form = new FormData;\r\n        form.append(\"pk\", this.context.options.pk);\r\n        form.append(\"name\", this.context.options.name);\r\n        form.append(\"value\", new_value);\r\n        if(this.context.options.ajaxOptions?.method === \"GET\"){\r\n            const params: [string?] = [];\r\n            form.forEach((value, key) => {\r\n                params.push(`${key}=${value}`);\r\n            });\r\n            url += \"?\" + params.join(\"&\");\r\n        }\r\n        return fetch(url, this.context.options.ajaxOptions);\r\n    }\r\n\r\n    async successResponse(_response: Response, _newValue: string): Promise<any>\r\n    {\r\n\r\n    }\r\n\r\n    async errorResponse(_response: Response, _newValue: string): Promise<any>\r\n    {\r\n\r\n    }\r\n\r\n    setError(errorMsg: string): void\r\n    {\r\n        if(this.error){\r\n            this.error.innerHTML = errorMsg;\r\n        }\r\n    }\r\n\r\n    showError(): void\r\n    {\r\n        if(this.error){\r\n            this.error.style.display = \"block\";\r\n        }\r\n    }\r\n\r\n    hideError(): void\r\n    {\r\n        if(this.error){\r\n            this.error.style.display = \"none\";\r\n        }\r\n    }\r\n\r\n    createElement(name: string): HTMLInputElement\r\n    {\r\n        const element = <HTMLInputElement>document.createElement(name);\r\n        element.classList.add(\"form-control\");\r\n        if(this.context.options.required){\r\n            element.required = this.context.options.required;\r\n        }\r\n        if(!this.context.options.showbuttons){\r\n            element.addEventListener('change', () => {\r\n                if(this.form){\r\n                    this.form.dispatchEvent(new Event('submit'));\r\n                }\r\n            });\r\n        }\r\n        this.add_focus(element);\r\n        return element;\r\n    }\r\n\r\n    add_focus(element: HTMLInputElement): void\r\n    {\r\n        this.context.element.addEventListener('shown', function(){\r\n            element.focus();\r\n        });\r\n    }\r\n\r\n    initText(): boolean\r\n    {\r\n        if(this.context.value === \"\"){\r\n            this.context.element.innerHTML = this.context.options.emptytext || \"\";\r\n            return true;\r\n        } else {\r\n            this.context.element.innerHTML = this.context.value;\r\n            return false;\r\n        }\r\n    }\r\n\r\n    initOptions(): void\r\n    {\r\n\r\n    }\r\n\r\n    getValue(): string\r\n    {\r\n        return this.element ? this.element.value : '';\r\n    }\r\n}","import BaseType from \"./BaseType.js\";\r\n\r\nexport default class InputType extends BaseType{\r\n    create(){\r\n        const input = this.createElement(`input`);\r\n        input.type = typeof this.context.options.type === \"string\" ? this.context.options.type : 'text';\r\n\r\n        return this.createContainer(input);\r\n    }\r\n}","import BaseType from \"./BaseType.js\";\r\n\r\nexport default class TextAreaType extends BaseType{\r\n    create(){\r\n        const textarea = this.createElement(`textarea`);\r\n\r\n        return this.createContainer(textarea);\r\n    }\r\n}","import BaseType from \"./BaseType.js\";\r\n\r\nexport default class SelectType extends BaseType{\r\n    create(){\r\n        const select = this.createElement(`select`);\r\n        if(this.context.options.source && Array.isArray(this.context.options.source)) {\r\n            this.context.options.source.forEach(item => {\r\n                const opt = document.createElement(`option`);\r\n                opt.value = item.value;\r\n                opt.innerHTML = item.text;\r\n                select.append(opt);\r\n            });\r\n        }\r\n\r\n        return this.createContainer(select);\r\n    }\r\n\r\n    initText(){\r\n        this.context.element.innerHTML = this.context.options.emptytext || \"\";\r\n        if(this.context.value !== \"\" && this.context.options.source && Array.isArray(this.context.options.source) && this.context.options.source.length > 0){\r\n            for(let i = 0; i < this.context.options.source.length; i++){\r\n                const item = this.context.options.source[ i ];\r\n                if( item.value == this.context.value){\r\n                    this.context.element.innerHTML = item.text;\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    initOptions(){\r\n        this.context.get_opt(\"source\", []);\r\n        if(this.context.options && typeof this.context.options.source === \"string\" && this.context.options.source !== \"\"){\r\n            this.context.options.source = JSON.parse(this.context.options.source);\r\n        }\r\n    }\r\n}","import BaseType from \"./BaseType.js\";\r\nimport moment from \"moment\";\r\n\r\nexport default class DateType extends BaseType{\r\n    create(){\r\n        const input = this.createElement(`input`);\r\n        input.type = \"date\";\r\n\r\n        return this.createContainer(input);\r\n    }\r\n\r\n    initText(): boolean\r\n    {\r\n        if(this.context.value === \"\"){\r\n            this.context.element.innerHTML = this.context.options.emptytext || \"\";\r\n            return true;\r\n        } else {\r\n            this.context.element.innerHTML = moment(this.context.value).format(this.context.options.viewformat);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    initOptions(): void\r\n    {\r\n        this.context.get_opt(\"format\", \"YYYY-MM-DD\");\r\n        this.context.get_opt(\"viewformat\", \"YYYY-MM-DD\");\r\n    }\r\n}","import DateType from \"./DateType.js\";\r\nimport moment from \"moment\";\r\n\r\nexport default class DateTimeType extends DateType{\r\n    create(){\r\n        const input = this.createElement(`input`);\r\n        input.type = \"datetime-local\";\r\n\r\n        return this.createContainer(input);\r\n    }\r\n\r\n    initOptions(): void\r\n    {\r\n        this.context.get_opt(\"format\", \"YYYY-MM-DD HH:mm\");\r\n        this.context.get_opt(\"viewformat\", \"YYYY-MM-DD HH:mm\");\r\n        this.context.value = moment(this.context.value).format(\"YYYY-MM-DDTHH:mm\");\r\n    }\r\n}","import \"./dark-editable.css\";\r\nimport PopupMode from \"./Modes/PopupMode.ts\";\r\nimport InlineMode from \"./Modes/InlineMode.ts\";\r\nimport BaseType from \"./Types/BaseType.ts\";\r\nimport InputType from \"./Types/InputType.ts\";\r\nimport TextAreaType from \"./Types/TextAreaType.ts\";\r\nimport SelectType from \"./Types/SelectType.ts\";\r\nimport DateType from \"./Types/DateType.ts\";\r\nimport DateTimeType from \"./Types/DateTimeType.ts\";\r\nimport Options from \"./Interfaces/Options.ts\";\r\nimport BaseMode from \"./Modes/BaseMode.ts\";\r\n\r\n/*!\r\n * DarkEditable.js\r\n * License: MIT\r\n */\r\nexport default class DarkEditable{\r\n    element: HTMLElement;\r\n    options: Options;\r\n\r\n    typeElement: BaseType;\r\n    modeElement: BaseMode;\r\n    value: string = '';\r\n\r\n    constructor(element: HTMLElement, options: Options = {}) {\r\n        this.element = element;\r\n        this.options = { ...options };\r\n        \r\n        this.init_options();\r\n        this.typeElement = this.route_type();\r\n        this.typeElement.initOptions();\r\n        this.modeElement = this.route_mode();\r\n        this.modeElement.init();\r\n        this.init_text();\r\n        this.init_style();\r\n        if(this.options.disabled){\r\n            this.disable();\r\n        }\r\n        this.element.dispatchEvent(new CustomEvent(\"init\"));\r\n    }\r\n\r\n    /* INIT METHODS */\r\n\r\n    get_opt(name: string, default_value: any): void\r\n    {\r\n        // @ts-ignore\r\n        this.options[name] = this.element.dataset?.[ name ] ?? this.options?.[ name ] ?? default_value;\r\n    }\r\n\r\n    get_opt_bool(name: string, default_value: any): void\r\n    {\r\n        this.get_opt(name, default_value);\r\n        // @ts-ignore\r\n        if(typeof this.options[ name ] !== \"boolean\"){\r\n            // @ts-ignore\r\n            if(this.options[ name ] === \"true\") {\r\n                // @ts-ignore\r\n                this.options[ name ] = true;\r\n                return;\r\n            }\r\n            // @ts-ignore\r\n            if(this.options[ name ] === \"false\") {\r\n                // @ts-ignore\r\n                this.options[ name ] = false;\r\n                return;\r\n            }\r\n            // @ts-ignore\r\n            this.options[ name ] = default_value;\r\n        }\r\n    }\r\n\r\n    init_options(): void\r\n    {\r\n        //priority date elements\r\n        this.get_opt(\"value\", this.element.innerHTML);\r\n        this.get_opt(\"name\", this.element.id);\r\n        this.get_opt(\"pk\", null);\r\n        this.get_opt(\"title\", \"\");\r\n        this.get_opt(\"type\", \"text\");\r\n        this.get_opt(\"emptytext\", \"Empty\");\r\n        this.get_opt(\"mode\", \"popup\");\r\n        this.get_opt(\"url\", null);\r\n        this.get_opt(\"ajaxOptions\", {});\r\n        this.options.ajaxOptions = Object.assign({\r\n            method: \"POST\",\r\n            dataType: \"text\",\r\n        }, this.options.ajaxOptions);\r\n        this.get_opt_bool(\"send\", true);\r\n        this.get_opt_bool(\"disabled\", false);\r\n        this.get_opt_bool(\"required\", false);\r\n        this.get_opt_bool(\"showbuttons\", true);\r\n        if(this.options?.success && typeof this.options?.success === \"function\"){\r\n            this.success = this.options.success;\r\n        }\r\n        if(this.options?.error && typeof this.options?.error === \"function\"){\r\n            this.error = this.options.error;\r\n        }\r\n    }\r\n\r\n    init_text(){\r\n        const empty_class = \"dark-editable-element-empty\";\r\n        this.element.classList.remove(empty_class);\r\n        if(this.typeElement.initText()){\r\n            this.element.classList.add(empty_class);\r\n        }\r\n    }\r\n\r\n    init_style(){\r\n        this.element.classList.add(\"dark-editable-element\");\r\n    }\r\n\r\n    /* INIT METHODS END */\r\n    route_mode(){\r\n        switch (this.options.mode){\r\n            default:\r\n                throw new Error(`Mode ${this.options.mode} not found!`)\r\n            case 'popup':\r\n                return new PopupMode(this);\r\n            case 'inline':\r\n                return new InlineMode(this);\r\n        }\r\n    }\r\n\r\n    route_type(): BaseType\r\n    {\r\n        if(this.options.type && typeof this.options.type !== 'string'){\r\n            // @ts-ignore\r\n            return new this.options.type(this);\r\n        }\r\n        switch (this.options.type) {\r\n            case \"text\":\r\n            case \"password\":\r\n            case \"email\":\r\n            case \"url\":\r\n            case \"tel\":\r\n            case \"number\":\r\n            case \"range\":\r\n            case \"time\":\r\n                return new InputType(this);\r\n            case \"textarea\":\r\n                return new TextAreaType(this);\r\n            case \"select\":\r\n                return new SelectType(this);\r\n            case \"date\":\r\n                return new DateType(this);\r\n            case \"datetime\":\r\n                return new DateTimeType(this);\r\n        }\r\n        throw new Error(`Undefined type`);\r\n    }\r\n\r\n    /* AJAX */\r\n\r\n    async success(response: Response, newValue: string): Promise<any>\r\n    {\r\n        return await this.typeElement.successResponse(response, newValue);\r\n    }\r\n\r\n    async error(response: Response, newValue: string): Promise<any>\r\n    {\r\n        return await this.typeElement.errorResponse(response, newValue);\r\n    }\r\n\r\n    /* AJAX END */\r\n\r\n    /* METHODS */\r\n\r\n    enable(): void\r\n    {\r\n        this.options.disabled = false;\r\n        this.element.classList.remove(\"dark-editable-element-disabled\");\r\n        this.modeElement.enable();\r\n    }\r\n\r\n    disable(): void\r\n    {\r\n        this.options.disabled = true;\r\n        this.element.classList.add(\"dark-editable-element-disabled\");\r\n        this.modeElement.enable();\r\n    }\r\n\r\n    setValue(value: string): void\r\n    {\r\n        this.value = value;\r\n        this.init_text();\r\n    }\r\n\r\n    getValue(): string\r\n    {\r\n        return this.value;\r\n    }\r\n\r\n    /* METHODS END */\r\n}"],"names":["BaseMode","context","__publicField","PopupMode","Popover","e","target","current","InlineMode","open","item","BaseType","element","div","form","newValue","msg","response","error","loader","button","btn_success","btn_cancel","new_value","url","_a","params","value","key","_response","_newValue","errorMsg","name","InputType","input","TextAreaType","textarea","SelectType","select","opt","i","DateType","moment","DateTimeType","DarkEditable","options","default_value","_b","_c","_d","empty_class"],"mappings":"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"}